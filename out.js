var $jscomp=$jscomp||{};$jscomp.scope={};$jscomp.arrayIteratorImpl=function(a){var b=0;return function(){return b<a.length?{done:!1,value:a[b++]}:{done:!0}}};$jscomp.arrayIterator=function(a){return{next:$jscomp.arrayIteratorImpl(a)}};$jscomp.makeIterator=function(a){var b="undefined"!=typeof Symbol&&Symbol.iterator&&a[Symbol.iterator];return b?b.call(a):$jscomp.arrayIterator(a)};$jscomp.arrayFromIterator=function(a){for(var b,d=[];!(b=a.next()).done;)d.push(b.value);return d};
$jscomp.arrayFromIterable=function(a){return a instanceof Array?a:$jscomp.arrayFromIterator($jscomp.makeIterator(a))};$jscomp.ASSUME_ES5=!1;$jscomp.ASSUME_NO_NATIVE_MAP=!1;$jscomp.ASSUME_NO_NATIVE_SET=!1;$jscomp.SIMPLE_FROUND_POLYFILL=!1;$jscomp.ISOLATE_POLYFILLS=!1;$jscomp.FORCE_POLYFILL_PROMISE=!1;$jscomp.FORCE_POLYFILL_PROMISE_WHEN_NO_UNHANDLED_REJECTION=!1;$jscomp.objectCreate=$jscomp.ASSUME_ES5||"function"==typeof Object.create?Object.create:function(a){var b=function(){};b.prototype=a;return new b};
$jscomp.defineProperty=$jscomp.ASSUME_ES5||"function"==typeof Object.defineProperties?Object.defineProperty:function(a,b,d){if(a==Array.prototype||a==Object.prototype)return a;a[b]=d.value;return a};$jscomp.getGlobal=function(a){a=["object"==typeof globalThis&&globalThis,a,"object"==typeof window&&window,"object"==typeof self&&self,"object"==typeof global&&global];for(var b=0;b<a.length;++b){var d=a[b];if(d&&d.Math==Math)return d}throw Error("Cannot find global object");};$jscomp.global=$jscomp.getGlobal(this);
$jscomp.IS_SYMBOL_NATIVE="function"===typeof Symbol&&"symbol"===typeof Symbol("x");$jscomp.TRUST_ES6_POLYFILLS=!$jscomp.ISOLATE_POLYFILLS||$jscomp.IS_SYMBOL_NATIVE;$jscomp.polyfills={};$jscomp.propertyToPolyfillSymbol={};$jscomp.POLYFILL_PREFIX="$jscp$";var $jscomp$lookupPolyfilledValue=function(a,b){var d=$jscomp.propertyToPolyfillSymbol[b];if(null==d)return a[b];d=a[d];return void 0!==d?d:a[b]};
$jscomp.polyfill=function(a,b,d,f){b&&($jscomp.ISOLATE_POLYFILLS?$jscomp.polyfillIsolated(a,b,d,f):$jscomp.polyfillUnisolated(a,b,d,f))};$jscomp.polyfillUnisolated=function(a,b,d,f){d=$jscomp.global;a=a.split(".");for(f=0;f<a.length-1;f++){var e=a[f];if(!(e in d))return;d=d[e]}a=a[a.length-1];f=d[a];b=b(f);b!=f&&null!=b&&$jscomp.defineProperty(d,a,{configurable:!0,writable:!0,value:b})};
$jscomp.polyfillIsolated=function(a,b,d,f){var e=a.split(".");a=1===e.length;f=e[0];f=!a&&f in $jscomp.polyfills?$jscomp.polyfills:$jscomp.global;for(var g=0;g<e.length-1;g++){var h=e[g];if(!(h in f))return;f=f[h]}e=e[e.length-1];d=$jscomp.IS_SYMBOL_NATIVE&&"es6"===d?f[e]:null;b=b(d);null!=b&&(a?$jscomp.defineProperty($jscomp.polyfills,e,{configurable:!0,writable:!0,value:b}):b!==d&&(void 0===$jscomp.propertyToPolyfillSymbol[e]&&(d=1E9*Math.random()>>>0,$jscomp.propertyToPolyfillSymbol[e]=$jscomp.IS_SYMBOL_NATIVE?
$jscomp.global.Symbol(e):$jscomp.POLYFILL_PREFIX+d+"$"+e),$jscomp.defineProperty(f,$jscomp.propertyToPolyfillSymbol[e],{configurable:!0,writable:!0,value:b})))};
$jscomp.getConstructImplementation=function(){function a(){function d(){}new d;Reflect.construct(d,[],function(){});return new d instanceof d}if($jscomp.TRUST_ES6_POLYFILLS&&"undefined"!=typeof Reflect&&Reflect.construct){if(a())return Reflect.construct;var b=Reflect.construct;return function(d,f,e){d=b(d,f);e&&Reflect.setPrototypeOf(d,e.prototype);return d}}return function(d,f,e){void 0===e&&(e=d);e=$jscomp.objectCreate(e.prototype||Object.prototype);return Function.prototype.apply.call(d,e,f)||
e}};$jscomp.construct={valueOf:$jscomp.getConstructImplementation}.valueOf();$jscomp.underscoreProtoCanBeSet=function(){var a={a:!0},b={};try{return b.__proto__=a,b.a}catch(d){}return!1};$jscomp.setPrototypeOf=$jscomp.TRUST_ES6_POLYFILLS&&"function"==typeof Object.setPrototypeOf?Object.setPrototypeOf:$jscomp.underscoreProtoCanBeSet()?function(a,b){a.__proto__=b;if(a.__proto__!==b)throw new TypeError(a+" is not extensible");return a}:null;
$jscomp.inherits=function(a,b){a.prototype=$jscomp.objectCreate(b.prototype);a.prototype.constructor=a;if($jscomp.setPrototypeOf){var d=$jscomp.setPrototypeOf;d(a,b)}else for(d in b)if("prototype"!=d)if(Object.defineProperties){var f=Object.getOwnPropertyDescriptor(b,d);f&&Object.defineProperty(a,d,f)}else a[d]=b[d];a.superClass_=b.prototype};$jscomp.polyfill("Reflect",function(a){return a?a:{}},"es6","es3");$jscomp.polyfill("Reflect.construct",function(a){return $jscomp.construct},"es6","es3");
$jscomp.polyfill("Reflect.setPrototypeOf",function(a){if(a)return a;if($jscomp.setPrototypeOf){var b=$jscomp.setPrototypeOf;return function(d,f){try{return b(d,f),!0}catch(e){return!1}}}return null},"es6","es5");$jscomp.polyfill("Array.prototype.fill",function(a){return a?a:function(b,d,f){var e=this.length||0;0>d&&(d=Math.max(0,e+d));if(null==f||f>e)f=e;f=Number(f);0>f&&(f=Math.max(0,e+f));for(d=Number(d||0);d<f;d++)this[d]=b;return this}},"es6","es3");
$jscomp.typedArrayFill=function(a){return a?a:Array.prototype.fill};$jscomp.polyfill("Int8Array.prototype.fill",$jscomp.typedArrayFill,"es6","es5");$jscomp.polyfill("Uint8Array.prototype.fill",$jscomp.typedArrayFill,"es6","es5");$jscomp.polyfill("Uint8ClampedArray.prototype.fill",$jscomp.typedArrayFill,"es6","es5");$jscomp.polyfill("Int16Array.prototype.fill",$jscomp.typedArrayFill,"es6","es5");$jscomp.polyfill("Uint16Array.prototype.fill",$jscomp.typedArrayFill,"es6","es5");
$jscomp.polyfill("Int32Array.prototype.fill",$jscomp.typedArrayFill,"es6","es5");$jscomp.polyfill("Uint32Array.prototype.fill",$jscomp.typedArrayFill,"es6","es5");$jscomp.polyfill("Float32Array.prototype.fill",$jscomp.typedArrayFill,"es6","es5");$jscomp.polyfill("Float64Array.prototype.fill",$jscomp.typedArrayFill,"es6","es5");
var canvas=document.getElementById("canv"),c=canvas.getContext("2d"),width=canvas.width,height=canvas.height,touchX=500,touchY=500,scaleFitNative=Math.max(width/1E3,height/1E3),deadScreen=!1,camera={x:0,y:0,z:0,xSpeed:0,ySpeed:0,zSpeed:0};window.onload=function(){setCanvasScale();startGame()};function startGame(){setCanvasScale();start();atMainMenu=!1}window.addEventListener("resize",function(){setCanvasScale()});
function engineUpdate(){getDeltaTime();deadScreen||(update(),render(),flashScreen("red"),fading&&fadeOut("black"));requestAnimationFrame(engineUpdate)}function setColor(a){c.fillStyle=a}function fillRect(a,b,d,f){c.fillRect(a*scaleFitNative,b*scaleFitNative,d*scaleFitNative,f*scaleFitNative)}function fillText(a,b,d,f,e,g){c.font=f*scaleFitNative+"px "+g;setColor(e);c.fillText(a,b*scaleFitNative,d*scaleFitNative)}
function noScale_fillText(a,b,d,f,e,g){c.font=f*scaleFitNative+"px "+g;setColor(e);c.fillText(a,b,d)}function drawImg(a,b,d,f,e){c.drawImage(a,b*scaleFitNative,d*scaleFitNative,f*scaleFitNative,e*scaleFitNative)}function drawTriangle(a,b,d,f,e,g){drawLine(a,b,d,f);drawLine(d,f,e,g);drawLine(e,g,a,b)}function background(a){c.drawImage(a,0,0,width,height)}function translate(a,b){c.translate(a*scaleFitNative,b*scaleFitNative)}function setOpacity(a){c.globalAlpha=a}
function drawLine(a,b,d,f){c.beginPath();c.moveTo(a*scaleFitNative,b*scaleFitNative);c.lineTo(d*scaleFitNative,f*scaleFitNative);c.stroke();c.closePath()}function moveTo(a,b){c.moveTo(a*scaleFitNative,b*scaleFitNative)}function lineTo(a,b){c.lineTo(a*scaleFitNative,b*scaleFitNative)}
function setCanvasScale(){width=canvas.width=window.innerWidth;height=canvas.height=window.innerHeight;c.webkitImageSmoothingEnabled=!1;c.mozImageSmoothingEnabled=!1;c.imageSmoothingEnabled=!1;scaleFitNative=Math.max(width/1E3,height/1E3)}function toRadians(a){return Math.PI/180*a}function random(a,b){return Math.floor(Math.random()*(b-a)+a)}var flashOp=0,flashing=!1;
function flashScreen(a){setColor(a);.3>flashOp&&flashing?flashOp+=.02*deltaTime:flashing=!1;!flashing&&.02<flashOp&&(flashOp-=.02*deltaTime);c.globalAlpha=flashOp;fillRect(0,0,1E3,1E3);c.globalAlpha=1}var fadeFlashOp=0,fading=!1;function fadeOut(a){setColor(a);fadeFlashOp+=.05*deltaTime;c.globalAlpha=fadeFlashOp;fillRect(0,0,1E3,1E3);c.globalAlpha=1}var deltaTime,dlastcalledtime=Date.now();function getDeltaTime(){deltaTime=(Date.now()-dlastcalledtime)/10;dlastcalledtime=Date.now()}
function cos(a){return Math.cos(a)}function sin(a){return Math.sin(a)}function connect(a,b){drawLine(a.x-camera.x,a.y-camera.y,b.x-camera.x,b.y-camera.y)}function loadImage(a){var b=new Image;b.src=a;return b}function loadAudio(a){return new Audio(a)};var entities=[],sand=[],walls=[],texts=[],gunImg,gun_flashImg,current_gunImg,zombieImg,cactusImg,ammoDisplayImg,scoreDisplayImg,shotSound,reloadSound,windSound,songAudio,deathSound,hurtSound,renderedBullets=[],moving=!0,player_health=5,player_currentAmmo=9,player_canShoot=!0,player_score=0,hazeStrength=0,gameTime=0;
function start(){current_gunImg=gunImg=loadImage("data/textures/gun.png");gun_flashImg=loadImage("data/textures/gun-flash.png");zombieImg=loadImage("data/textures/zombie.png");cactusImg=loadImage("data/textures/cactus.png");ammoDisplayImg=loadImage("data/textures/ammo.png");scoreDisplayImg=loadImage("data/textures/score.png");shotSound=loadAudio("data/sfx/shot.wav");reloadSound=loadAudio("data/sfx/gun-charge.wav");windSound=loadAudio("data/sfx/wind.wav");songAudio=loadAudio("data/sfx/desert-storm.wav");
deathSound=loadAudio("data/sfx/death.wav");hurtSound=loadAudio("data/sfx/hit.wav");shotSound.volume=.3;songAudio.volume=.3;songAudio.loop=!0;startMainMenu()}
function render(){gameTime+=.1*deltaTime;setColor("skyblue");fillRect(0,0,1E3,1E3);setColor("yellow");fillRect(0,270,1E3,1E3);for(var a=0;a<sand.length;a++)sand[a].render();for(a=0;a<walls.length;a++)walls[a].render(),walls[a].main||walls[a].z<camera.z-700&&walls.splice(a,1);for(a=0;a<entities.length;a++)entities[a].render();for(a=0;a<texts.length;a++)fillText(texts[a].text,texts[a].x-camera.x,texts[a].y-camera.y,texts[a].size,texts[a].color,"Arial");for(a=0;a<renderedBullets.length;a++){renderedBullets[a].time+=
.15*deltaTime;if(1<renderedBullets[a].time){renderedBullets.splice(a,1);break}setColor(renderedBullets[a].color);fillRect(renderedBullets[a].x-camera.x,renderedBullets[a].y,renderedBullets[a].size,renderedBullets[a].size)}c.drawImage(current_gunImg,width/2-50*scaleFitNative,height-180*scaleFitNative,100*scaleFitNative,180*scaleFitNative);player_RenderHealthBar();player_RenderAmmoDisplay();player_RenderScoreDisplay();setColor("rgb(179, 201, 68)");setOpacity(hazeStrength);fillRect(0,0,1E3,1E3);setOpacity(1)}
function update(){entities.sort(function(b,d){return d.z-b.z});moving=!0;for(var a=0;a<entities.length;a++)entities[a].update(),entities[a].collideWithPlayer(),entities[a]instanceof Zombie&&(entities[a].AI(),entities[a].z<camera.z-800&&player_score--),entities[a].z<camera.z-800&&entities.splice(a,1);for(a=0;a<sand.length;a++)sand[a].z<camera.z-700&&sand.splice(a,1);for(a=0;a<texts.length;a++)texts[a].time+=.1*deltaTime,1.5<=texts[a].time&&texts.splice(a,1);camera.z+=camera.zSpeed*deltaTime;camera.x+=
camera.xSpeed*deltaTime;-490>camera.x&&(camera.x=-491);490<camera.x&&(camera.x=491);hazeStrength+=.001*deltaTime;hazeStrength>camera.zSpeed/3E3&&(hazeStrength-=camera.zSpeed/3E3*deltaTime);0>hazeStrength?hazeStrength=windSound.volume=0:1<hazeStrength?hazeStrength=windSound.volume=1:windSound.volume=hazeStrength};function player_shoot(){for(var a=500+random(-25,25),b=250+random(-10,10),d="black",f=1,e=0;e<entities.length;e++)entities[e]instanceof Zombie&&entities[e].rx+entities[e].rs*entities[e].w>a&&entities[e].rx<a&&(d="red",f=5,entities[e].health--,0>=entities[e].health&&(player_score+=5,texts.push({text:"+5",x:entities[e].rx+camera.x,y:entities[e].ry+camera.y,size:50,color:"green",time:0}),entities.splice(e,1)));renderedBullets.push({x:a+camera.x,y:b,time:0,color:d,size:f});player_currentAmmo--;0>=player_currentAmmo&&
player_reload();shotSound.currentTime=0;shotSound.play();current_gunImg=gun_flashImg;setTimeout(function(){current_gunImg=gunImg},50)}
function player_RenderHealthBar(){setColor("red");c.fillRect(width/2-300*scaleFitNative,height-48*scaleFitNative,150*scaleFitNative,30*scaleFitNative);setColor("green");c.fillRect(width/2-300*scaleFitNative,height-48*scaleFitNative,30*player_health*scaleFitNative,30*scaleFitNative);noScale_fillText("Health",width/2-260*scaleFitNative,height-25*scaleFitNative,25,"black","arial")}
function player_RenderAmmoDisplay(){c.drawImage(ammoDisplayImg,width/2+70*scaleFitNative,height-50*scaleFitNative,40*scaleFitNative,40*scaleFitNative);noScale_fillText(player_currentAmmo,width/2+130*scaleFitNative,height-25*scaleFitNative,25,"black","arial")}function player_RenderScoreDisplay(){c.drawImage(scoreDisplayImg,0*scaleFitNative,0*scaleFitNative,40*scaleFitNative,40*scaleFitNative);noScale_fillText(player_score,45*scaleFitNative,25*scaleFitNative,25,"black","arial")}
function player_reload(){player_canShoot=!1;player_currentAmmo="Reloading";reloadSound.currentTime=0;reloadSound.play();setTimeout(function(){player_currentAmmo=9;player_canShoot=!0},700)}function player_die(){deadScreen=!0;deathSound.play();songAudio.pause();songAudio.volume=0;windSound.volume=1;startDeadMenu()};var Entity=function(a,b,d,f,e,g){this.x=a;this.y=b;this.z=d;this.w=f;this.h=e;this.img=g;this.rx=this.x;this.ry=this.y;this.rs=this.w};Entity.prototype.render=function(){drawImg(this.img,this.rx,this.ry,this.rs*this.w,this.rs*this.h)};Entity.prototype.update=function(){this.rs=800/(800+this.z-camera.z);this.rx=(this.x-camera.x)*this.rs+500;this.ry=(this.y-camera.y)*this.rs+250};
Entity.prototype.collideWithPlayer=function(){500<this.rx+this.rs*this.w&&500>this.rx&&this.z+700<=camera.z&&this.z+750>camera.z&&(camera.z=this.z+700,moving=!1,this instanceof Zombie&&(this.lastHit+=.05*deltaTime,2<this.lastHit&&(player_health--,hurtSound.currentTime=0,hurtSound.play(),0>=player_health&&player_die(),flashing=!0,this.lastHit=0)))};var Cactus=function(a,b,d){Entity.call(this,a,b,d,60,80,cactusImg)};$jscomp.inherits(Cactus,Entity);var Zombie=function(a,b,d){Entity.call(this,a,b,d,40,70,zombieImg);this.health=3;this.lastHit=2;this.lastSpeedChange=this.xSpeed=0};$jscomp.inherits(Zombie,Entity);Zombie.prototype.AI=function(){this.z-=3*deltaTime;this.lastSpeedChange+=.01*deltaTime;1<=this.lastSpeedChange&&(this.xSpeed=random(-2,2),this.lastSpeedChange=0);this.x+=this.xSpeed*deltaTime;-490>this.x&&(this.x=-491);490<this.x&&(this.x=491)};var zombieIterator=0,cloudIterator=0,wallIterator=0;
function spawnEntities(){if(0!=camera.zSpeed&&moving){var a=new Cactus(random(-500,500),-20,camera.z+1300);entities.push(a);for(a=0;10>a;a++){var b=new Particle3D(random(-500,500),60,camera.z+1300,10,10,3==random(0,5)?"yellowgreen":"orange",1);sand.push(b)}cloudIterator++;10<=cloudIterator&&(a=new Particle3D(random(-500,500),-400,camera.z+1300,200,300,"white",.5),sand.push(a),cloudIterator=0);wallIterator++;2<wallIterator&&(walls.push(new WallParticle(-500,random(-350,20),camera.z+1150,25,80,"dimgray",
!1)),walls.push(new WallParticle(500,random(-350,20),camera.z+1150,25,80,"dimgray",!1)),wallIterator=0)}zombieIterator++;10<=zombieIterator&&(a=new Zombie(random(-500,500),-10,camera.z+1300),entities.push(a),zombieIterator=0);setTimeout(spawnEntities,100)};var Point3D=function(a,b,d){this.x=a;this.y=b;this.z=d;this.rs=1;this.rx=this.x;this.ry=this.y};Point3D.prototype.render=function(){setColor("black");fillRect(this.rx,this.ry,this.rs,this.rs)};Point3D.prototype.update=function(){this.rs=800/(800+this.z-camera.z);this.rx=(this.x-camera.x)*this.rs+500;this.ry=(this.y-camera.y)*this.rs+250};Point3D.prototype.updateNoZ=function(){this.rs=800/(800+this.z);this.rx=(this.x-camera.x)*this.rs+500;this.ry=(this.y-camera.y)*this.rs+250};var Particle3D=function(a,b,d,f,e,g,h){this.x=a;this.y=b;this.z=d;this.w=f;this.d=e;this.color=g;this.op=h;this.points=[];this.points.push(new Point3D(this.x,this.y,this.z));this.points.push(new Point3D(this.x+this.w,this.y,this.z));this.points.push(new Point3D(this.x,this.y,this.z+this.d));this.points.push(new Point3D(this.x+this.w,this.y,this.z+this.d))};
Particle3D.prototype.render=function(){for(var a=0;a<this.points.length;a++)this.points[a].update();setOpacity(this.op);setColor(this.color);c.beginPath();moveTo(this.points[0].rx,this.points[0].ry);lineTo(this.points[1].rx,this.points[1].ry);lineTo(this.points[3].rx,this.points[3].ry);lineTo(this.points[2].rx,this.points[2].ry);c.fill();c.closePath();setOpacity(1)};var WallParticle=function(a,b,d,f,e,g,h){this.x=a;this.y=b;this.z=d;this.h=f;this.d=e;this.color=g;this.main=h;this.points=[];this.points.push(new Point3D(this.x,this.y,this.z));this.points.push(new Point3D(this.x,this.y+this.h,this.z));this.points.push(new Point3D(this.x,this.y,this.z+this.d));this.points.push(new Point3D(this.x,this.y+this.h,this.z+this.d))};
WallParticle.prototype.render=function(){for(var a=0;a<this.points.length;a++)this.main?this.points[a].updateNoZ():this.points[a].update();setColor(this.color);c.beginPath();moveTo(this.points[0].rx,this.points[0].ry);lineTo(this.points[1].rx,this.points[1].ry);lineTo(this.points[3].rx,this.points[3].ry);lineTo(this.points[2].rx,this.points[2].ry);c.fill();c.closePath()};function keyDown(a){switch(a.code){case "KeyW":camera.zSpeed=5;break;case "KeyD":camera.xSpeed=5;break;case "KeyA":camera.xSpeed=-5;break;case "ShiftLeft":player_canShoot&&player_shoot()}}function keyUp(a){switch(a.code){case "KeyW":camera.zSpeed=0;break;case "KeyD":case "KeyA":camera.xSpeed=0}}document.onkeydown=keyDown;document.onkeyup=keyUp;var mouseX,mouseY,mousePressed=!1;function mouseDown(){player_canShoot&&player_shoot()}function getMousePos(a){mouseX=a.clientX;mouseY=a.clientY}window.addEventListener("mousemove",function(a){getMousePos(a)});window.addEventListener("mousedown",function(a){songAudio.play();getMousePos(a);mousePressed=!0});window.addEventListener("mouseup",function(a){mousePressed=!1});var playButton,tutorialButton,atMenu=!0,menuImg,textImg;function startMainMenu(){playButton=new Button(500,200,100,50,"blue","Play");tutorialButton=new Button(500,300,100,50,"blue","Tutorial");menuImg=loadImage("data/textures/menu/menu.png");textImg=loadImage("data/textures/menu/text.png");updateMainMenu()}function renderMainMenu(){background(menuImg);setOpacity(.5);setColor("black");fillRect(0,0,1E3,1E3);setOpacity(1);drawImg(textImg,300,10,400,100);playButton.render();tutorialButton.render()}
function updateMainMenu(){playButton.clicked()&&play();tutorialButton.clicked()&&startTutorial();renderMainMenu();atMenu&&requestAnimationFrame(updateMainMenu)}
function play(){atMenu=!1;engineUpdate();playerScore=gameTime=hazeStrength=0;document.onmousedown=mouseDown;for(var a=0;10>a;a++){var b=new Cactus(random(-500,500),-20,100*a);entities.push(b);for(b=0;10>b;b++){var d=new Particle3D(random(-500,500),60,100*a,10,10,3==random(0,5)?"yellowgreen":"orange");sand.push(d)}zombieIterator++;10==zombieIterator&&(b=new Zombie(random(-500,500),-10,100*a),entities.push(b),zombieIterator=0)}spawnEntities();walls.push(new WallParticle(-500,-350,-790,400,2E3,"gray",
!0));walls.push(new WallParticle(500,-350,-790,400,2E3,"gray",!0));windSound.play();windSound.addEventListener("timeupdate",function(){this.currentTime>=this.duration-.44&&(this.currentTime=0)})};var restartButton;function startDeadMenu(){document.onmousedown="";deadScreen=!0;restartButton=new Button(500,200,100,50,"blue","Restart");windSound.volume=1;updateDeadMenu()}function renderDeadMenu(){background(menuImg);setOpacity(.5);setColor("red");fillRect(0,0,1E3,1E3);setOpacity(1);fillText("Game Over",210,100,80,"black","Holtwood One SC");fillText("Score: "+player_score,440,120,20,"black","Holtwood One SC");restartButton.render()}
function updateDeadMenu(){windSound.volume=1;restartButton.clicked()&&location.reload();renderDeadMenu();requestAnimationFrame(updateDeadMenu)};var inTutorial=!1;
function startTutorial(){inTutorial||document.write("<h1>How to play</h1><p>The goal of the game is to kill as many zombies as possible. Use your gun to kill the zombies. You will get 5 points per zombie kill. If a zombie passes you, you will loose one point</p><p>Try to not stay in the same place for a long time. If you do, the storm will come in and you will loose vision as it gets dusty. Move forward to get away from the storm</p><h1>Controls</h1><p>Walk forward &nbsp; | &nbsp; 'W'</p><p>Strafe right &nbsp; &nbsp; &nbsp; | &nbsp; 'D'</p><p>Strafe left &nbsp; &nbsp; &nbsp; &nbsp; | &nbsp; 'A'</p><p>Shoot &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; | &nbsp; 'Click' or 'Left-Shift' </p><button onclick='returnToMainMenu();'>Back to main menu</button><style>@import url('https://fonts.googleapis.com/css2?family=Titillium+Web&display=swap');body {background-image: url('data/textures/menu/menu.png')}h1 {font-family: 'Titillium Web'; font-size:45px}p {font-family: 'Titillium Web'; font-size: 25px}button {font-family: 'Titillium Web'; width: 180px; height: 50px; border: none; font-size: 20px; background-color: blue; color: white;}</style>");inTutorial=
!0}function returnToMainMenu(){location.reload()};var Button=function(a,b,d,f,e,g){this.x=a;this.y=b;this.w=d;this.h=f;this.text=g;this.color=e;this.fontSize=180/(1.5*this.text.length)};Button.prototype.render=function(){setColor(this.color);fillRect(this.x+-this.w/2,this.y+-this.h/2,this.w,this.h);fillText(this.text,this.x-this.w/2+this.fontSize/12,this.y+this.h/4,this.fontSize,"white","Holtwood One SC")};
Button.prototype.clicked=function(){if(mouseX>(this.x+-this.w/2)*scaleFitNative&&mouseX<(this.x+-this.w/2)*scaleFitNative+this.w*scaleFitNative&&mousePressed&&mouseY>(this.y+-this.h/2)*scaleFitNative&&mouseY<(this.y+-this.h/2)*scaleFitNative+this.h*scaleFitNative)return!0};
